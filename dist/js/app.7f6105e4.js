(function(n){function t(t){for(var o,r,i=t[0],c=t[1],u=t[2],l=0,p=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(n[o]=c[o]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),e()}function e(){for(var n,t=0;t<a.length;t++){for(var e=a[t],o=!0,r=1;r<e.length;r++){var c=e[r];0!==s[c]&&(o=!1)}o&&(a.splice(t--,1),n=i(i.s=e[0]))}return n}var o={},s={app:0},a=[];function r(n){return i.p+"js/"+({about:"about"}[n]||n)+"."+{about:"41065dc1"}[n]+".js"}function i(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.e=function(n){var t=[],e=s[n];if(0!==e)if(e)t.push(e[2]);else{var o=new Promise((function(t,o){e=s[n]=[t,o]}));t.push(e[2]=o);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=r(n);var u=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(l);var e=s[n];if(0!==e){if(e){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+n+" failed.\n("+o+": "+a+")",u.name="ChunkLoadError",u.type=o,u.request=a,e[1](u)}s[n]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},i.m=n,i.c=o,i.d=function(n,t,e){i.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},i.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,t){if(1&t&&(n=i(n)),8&t)return n;if(4&t&&"object"===typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)i.d(e,o,function(t){return n[t]}.bind(null,o));return e},i.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return i.d(t,"a",t),t},i.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},i.p="/",i.oe=function(n){throw console.error(n),n};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=u;a.push([0,"chunk-vendors"]),e()})({0:function(n,t,e){n.exports=e("56d7")},"034f":function(n,t,e){"use strict";var o=e("85ec"),s=e.n(o);s.a},"56d7":function(n,t,e){"use strict";e.r(t);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o=e("2b0e"),s=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"header"},[e("Menu"),e("h1",{staticClass:"headline"},[n._v("Zpěvníkovač")])],1),e("router-view")],1)},a=[],r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[n.store.currentUser?e("div",{staticClass:"menu"},[e("div",{staticClass:"user"},[e("md-avatar",{staticStyle:{margin:"10px",width:"40px"}},[e("img",{attrs:{src:n.store.currentUser.photoURL,alt:n.store.currentUser.displayName}})]),e("div",[n._v(n._s(n.store.currentUser.email))])],1),e("md-button",{staticClass:"songbooks-button-large",attrs:{to:"/songbooks"}},[n._v("Moje zpěvníky")]),e("md-button",{staticClass:"songbooks-button-small",attrs:{to:"/songbooks"}},[n._v("Zpěvníky")]),e("md-button",{staticClass:"signout-button-large",on:{click:function(t){return t.preventDefault(),n.signOut(t)}}},[n._v("Odhlásit se")]),e("md-button",{staticClass:"signout-button-small",on:{click:function(t){return t.preventDefault(),n.signOut(t)}}},[e("md-icon",[n._v("login")])],1)],1):e("div",{staticClass:"menu"},[e("md-button",{on:{click:function(t){return t.preventDefault(),n.signInWithGoogle(t)}}},[n._v("Přihlásit se přes Google")])],1)])},i=[],c=e("59ca"),u=e.n(c),l=(e("ea7b"),e("4160"),e("b0c0"),e("d3b7"),e("25f0"),e("159b"),e("96cf"),e("1da1")),d=(e("e71f"),{apiKey:"AIzaSyAuL00hSASZLYySrOK_kVSK0bm49CE9sls",authDomain:"zpevnikovac.firebaseapp.com",databaseURL:"https://zpevnikovac.firebaseio.com",projectId:"zpevnikovac",storageBucket:"zpevnikovac.appspot.com",messagingSenderId:"273021499722",appId:"1:273021499722:web:fcef6f60c7bb25a8ca69b3",measurementId:"G-PKEH188111"});function p(n){return"PUBLIC"===n?m.publicSongsCollection:m.userSongsCollection}u.a.initializeApp(d);var m={currentUser:null,publicSongsCollection:u.a.firestore().collection("songs"),userSongsCollection:u.a.firestore().collection("users/default/songs"),publicSongs:null,userSongs:null,writeSong:function(){var n=Object(l["a"])(regeneratorRuntime.mark((function n(t,e,o){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=null,s=e?p(t).doc(e):p(t).doc(),a=u.a.firestore().batch(),a.set(s,{name:o.name,slug:o.slug,composer:o.composer}),a.set(s.collection("history").doc((new Date).valueOf().toString()),{user_id:m.currentUser.uid,user_name:m.currentUser.displayName,song_info:{name:o.name,slug:o.slug,composer:o.composer,capo:o.capo,content:o.content}}),n.prev=5,n.abrupt("return",a.commit());case 9:return n.prev=9,n.t0=n["catch"](5),n.abrupt("return",console.error("error",n.t0));case 12:case"end":return n.stop()}}),n,null,[[5,9]])})));function t(t,e,o){return n.apply(this,arguments)}return t}(),removeSong:function(){var n=Object(l["a"])(regeneratorRuntime.mark((function n(t,e){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=p(t),n.abrupt("return",o.doc(e).delete());case 2:case"end":return n.stop()}}),n)})));function t(t,e){return n.apply(this,arguments)}return t}()};m.publicSongsCollection.orderBy("name","asc").onSnapshot((function(n){var t=[];console.log(n),n.forEach((function(n){var e=n.data();e.id=n.id,t.push(e)})),console.log("Received public songs feed:",t),m.publicSongs=t})),u.a.auth().onAuthStateChanged((function(n){console.log("Logged in as:",n),m.currentUser=n,m.userSongsCollection=u.a.firestore().collection("/users/".concat(n.uid,"/songs")),m.userSongsCollection.orderBy("name","asc").onSnapshot((function(n){var t=[];n.forEach((function(n){var e=n.data();e.id=n.id,t.push(e)})),console.log("Received user songs feed:",t),m.userSongs=t}))}));var f={name:"Menu",data:function(){return{store:m}},methods:{signInWithGoogle:function(){var n=new u.a.auth.GoogleAuthProvider;u.a.auth().signInWithPopup(n).catch((function(n){return alert(n.message||n)}))},signOut:function(){u.a.auth().signOut().catch((function(n){return alert(n.message||n)}))}}},g=f,v=(e("ce09"),e("2877")),h=Object(v["a"])(g,r,i,!1,null,"0fe13a66",null),b=h.exports,_={name:"App",components:{Menu:b}},y=_,k=(e("034f"),Object(v["a"])(y,s,a,!1,null,null,null)),S=k.exports,C=e("15fd"),z=e.n(C),w=e("8c4f"),j=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"container",attrs:{id:"app"}},[n._m(0),e("div",{staticClass:"columns"},[e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item list-songs"},[e("div",{staticClass:"list-songs-header"},[e("h2",[n._v("Hlavní databáze")]),e("md-button",{staticClass:"add-button md-icon-button md-accent md-raised",attrs:{to:{name:"Song Add",params:{type:"PUBLIC"}}}},[e("md-icon",[n._v("upgrade")])],1)],1),e("ListSongs",{attrs:{type:"PUBLIC"}})],1),e("div",{staticClass:"md-layout-item list-songs"},[e("div",{staticClass:"list-songs-header"},[e("h2",[n._v("Osobní databáze")]),e("md-button",{staticClass:"add-button md-icon-button md-accent md-raised",attrs:{to:{name:"Song Add",params:{type:"USER"}}}},[e("md-icon",[n._v("add")])],1)],1),e("ListSongs",{attrs:{type:"USER"}})],1)])]),e("div",{staticClass:"tabs"},[e("md-tabs",[e("md-tab",{attrs:{id:"tab-main","md-label":"Hlavní"}},[e("ListSongs")],1),e("md-tab",{attrs:{id:"tab-personal","md-label":"Osobní"}},[e("ListSongs")],1)],1)],1)])},I=[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"welcome"},[e("p",[n._v("Přihlaš se vlevo nahoře.")]),e("p",[n._v("Jsou dvě databáze písní: hlavní a osobní. Do osobní máš přístup jen ty. Do hlavní zatím mají přístup všichni (než vyřeším přístupová práva, editace, a tak).")]),e("p",[n._v("Můžeš přidávat i upravovat songy v obou databázích. Prosím, když něco přidáváš do hlavní, dbej na to, aby to fakt bylo ve správném formátu (zobrazí se to pak totiž všem).")]),e("p",[n._v(" Kdybys měl nějaký dotaz, napiš na "),e("a",{attrs:{href:"mailto:adam.krivka@skaut.cz",target:"_blank"}},[n._v("adam.krivka@skaut.cz")]),n._v(". ")])])}],E=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[e("md-field",{staticClass:"search-wrapper"},[e("md-input",{attrs:{type:"text",placeholder:"Vyhledat píseň"},model:{value:n.search,callback:function(t){n.search=t},expression:"search"}}),e("label",[n._v("Vyhledat píseň")])],1),e("md-card",n._l(n.filteredSongs,(function(t){return e("md-list",{key:t.id},[e("Song",{attrs:{song_name:t.name,song_composer:t.composer,song_slug:t.slug,type:n.type}})],1)})),1)],1)},O=[],x=(e("4de4"),e("caad"),e("ac1f"),e("2532"),e("841c"),function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("md-list-item",{attrs:{to:{name:n.route,params:{song_slug:n.song_slug}}}},[n._v(" "+n._s(n.song_name)+" – "+n._s(n.song_composer)+" ")])],1)}),A=[],P=(e("fb6a"),{name:"Song",props:["song_name","song_composer","song_slug","type"],computed:{route:function(){return this.type?"SongView"+this.type.charAt(0)+this.type.toLowerCase().slice(1):null}}}),L=P,$=Object(v["a"])(L,x,A,!1,null,null,null),U=$.exports,G={name:"ListSongs",components:{Song:U},data:function(){return{store:m,search:""}},props:["type"],computed:{filteredSongs:function(){var n,t=this;return n="PUBLIC"===this.type?this.store.publicSongs:this.store.userSongs,null!=n?n.filter((function(n){return n.name.toLowerCase().includes(t.search.toLowerCase())})):null}}},V=G,R=(e("7c5b"),Object(v["a"])(V,E,O,!1,null,null,null)),D=R.exports,B={name:"Home",components:{ListSongs:D},data:function(){return{store:m}}},M=B,T=(e("cccb"),Object(v["a"])(M,j,I,!1,null,null,null)),K=T.exports,F=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[e("div",{staticClass:"md-layout-item md-size-33"},[e("SongEditGuidelines")],1),e("div",{staticClass:"md-layout-item md-size-50"},[e("h1",[n._v("Informace o songu")]),n._v(" ID: "+n._s(n.songId)+" "),e("SongForm",{attrs:{songInfo:n.songInfo}}),e("div",{staticClass:"md-alignment-top-center"},[e("md-button",{staticClass:"md-accent",on:{click:function(t){return n.postSong(n.type)}}},[n._v(" Upravit v "),"PUBLIC"===n.type?e("span",[n._v("hlavní")]):e("span",[n._v("osobní")]),n._v(" databázi ")])],1)],1)])},q=[],H=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("h2",[n._v("Jak na to?")]),n._m(0),e("h3",[n._v("Vzorová píseň")]),n._m(1),e("p",{staticClass:"example-song"},[n._v(n._s(n.batalion))])])},J=[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("p",[n._v(" Na začátku každého řádku jsou 3 mezery. "),e("br"),n._v("Všechny akordy piš normálně Am, F#, Dsus2, ... "),e("br"),n._v("Capo můžeš nechat volný, pokud tam není. "),e("br"),n._v("Délku každého řádku zkus družet do "),e("b",[n._v("50")]),n._v(" znaků, ale nijak zvlášť to ošetřený zatím není. ")])},function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("i",[n._v(" (Formát je stejný/podobný jako na "),e("a",{attrs:{href:"https://www.pisnicky-akordy.cz",target:"_blank"}},[n._v("pisnicky-akordy.cz")]),n._v(".) ")])}],N={name:"SongEditGuidelines",data:function(){return{batalion:"\n   Ami  C     G    Ami           C      G  Emi Ami\n*: Víno máš a markytánku, dlouhá noc se prohýří,\n   víno máš a chvilku spánku, díky, díky, verbíři.\n\n   Ami                           C          G      Ami Emi\n1. Dříve než se rozední, kapitán k osedlání rozkaz dává,\n   Ami                   G  Ami Emi Ami\n   ostruhami do slabin koně pohání.\n   Tam na straně polední, čekají ženy, zlaťáky a sláva,\n   do výstřelů z karabin zvon už vyzvání.\n\n   Ami       C      G              Ami Emi\nR: Víno na kuráž, a pomilovat markytánku,\n   Ami         C              Ami Emi Ami\n   zítra do Burgund, batalion zamíří.\n   Víno na kuráž a k ránu dvě hodiny spánku,\n   díky, díky vám královští verbíři.\n\n2. Rozprášen je batalion, poslední vojáci se k zemi hroutí,\n   na polštáři z kopretin budou věčně spát.\n   Neplač sladká Marion, verbíři nové chlapce přivedou ti,\n   za královský hermelín, padne každý rád.\n\nR: Víno na kuráž ...\n*: Víno máš a markytánku ..."}}},Z=N,W=(e("6500"),Object(v["a"])(Z,H,J,!1,null,"e6698f7e",null)),Y=W.exports,Q=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("form",{staticClass:"md-layout md-alignment-top-center"},[e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",{staticClass:"info"},[e("label",[n._v("Jméno")]),e("md-input",{attrs:{type:"text"},model:{value:n.song_info.name,callback:function(t){n.$set(n.song_info,"name",t)},expression:"song_info.name"}})],1),e("md-field",{staticClass:"info"},[e("label",[n._v("Autor")]),e("md-input",{attrs:{type:"text"},model:{value:n.song_info.composer,callback:function(t){n.$set(n.song_info,"composer",t)},expression:"song_info.composer"}})],1),e("md-field",{staticClass:"info"},[e("label",[n._v("Capo")]),e("md-input",{attrs:{type:"text"},model:{value:n.song_info.capo,callback:function(t){n.$set(n.song_info,"capo",t)},expression:"song_info.capo"}})],1),e("md-button",{on:{click:n.addThreeSpaces}},[n._v("Přidat tři mezery na začátek každého řádku")]),e("md-field",{staticClass:"info"},[e("label",[n._v("Obsah")]),e("md-textarea",{staticStyle:{"font-family":"'PT Mono', monospace"},attrs:{cols:"50","md-autogrow":""},model:{value:n.song_info.content,callback:function(t){n.$set(n.song_info,"content",t)},expression:"song_info.content"}})],1)],1)])])},X=[],nn=(e("1276"),{name:"SongForm",props:["song_info"],methods:{addThreeSpaces:function(){for(var n="",t=0;t<this.song_info.content.split("\n").length;t++)n+="   "+this.song_info.content.split("\n")[t]+"\n";this.song_info.content=n.slice(0,n.length-1)}}}),tn=nn,en=Object(v["a"])(tn,Q,X,!1,null,null,null),on=en.exports,sn={name:"Song Edit",components:{SongForm:on,SongEditGuidelines:Y},data:function(){return{songInfo:{name:null,composer:null,capo:null,content:null}}},props:{songId:{type:String,required:!0},type:{required:!0}},methods:{postSong:function(n){m.editSong(n,this.songId,this.songInfo)}},created:function(){var n=this;console.log(this.type);var t=null;t="PUBLIC"===this.type?m.publicSongs:m.userSongs;var e=t.filter((function(t){return t.id===n.songId}))[0];this.songInfo.name=e.songInfo.name,this.songInfo.composer=e.songInfo.composer,this.songInfo.capo=e.songInfo.capo,this.songInfo.content=e.songInfo.content}},an=sn,rn=Object(v["a"])(an,F,q,!1,null,"12ca4040",null),cn=rn.exports,un=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[e("div",{staticClass:"md-layout-item md-size-33"},[e("SongEditGuidelines")],1),e("div",{staticClass:"md-layout-item md-size-50"},[e("h2",[n._v("Informace o písni")]),e("SongForm",{attrs:{song_info:n.song_info}}),e("div",{staticClass:"md-alignment-top-center"},[e("md-button",{staticClass:"md-accent",on:{click:function(t){return n.postSong(n.type)}}},[n._v(" Přidat do "),"PUBLIC"===n.type?e("span",[n._v("hlavní")]):e("span",[n._v("osobní")]),n._v(" databáze ")])],1)],1)])},ln=[],dn=e("d3bd"),pn={name:"Song Add",components:{SongForm:on,SongEditGuidelines:Y},data:function(){return{song_info:{name:null,composer:null,capo:null,content:null}}},props:{type:{required:!0}},methods:{postSong:function(n){this.song_info.slug=dn(this.song_info.name),m.writeSong(n,null,this.song_info),this.$router.push("/")}}},mn=pn,fn=Object(v["a"])(mn,un,ln,!1,null,"7e3d4bf4",null),gn=fn.exports,vn=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("h2",[n._v(n._s(n.song_info.name))]),e("h3",[n._v(n._s(n.song_info.composer))]),e("h4",[n._v("Capo: "+n._s(n.song_info.capo))]),e("p",[n._v(n._s(n.song_info.content))])])},hn=[],bn={name:"SongView",data:function(){return{store:m,song_info:{name:"ahoj",composer:"",capo:"",content:""}}},created:function(){var n,t=!this.$route.path.includes("user");n=t?this.store.publicSongsCollection:this.store.userSongsCollection;var e=this;n.where("slug","==",this.$route.params.song_slug).get().then((function(t){var o=e;1==t.size?n.doc(t.docs[0].id).collection("history").limit(1).get().then((function(n){o.song_info=n.docs[0].data().song_info})):console.log("duplicate song slugs")}))}},_n=bn,yn=(e("7a45"),Object(v["a"])(_n,vn,hn,!1,null,"0037788c",null)),kn=yn.exports,Sn=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[n._v(" ahoj ")])},Cn=[],zn={},wn=zn,jn=Object(v["a"])(wn,Sn,Cn,!1,null,null,null),In=jn.exports;o["default"].use(w["a"]);var En=[{path:"/",name:"Home",component:K},{path:"/about",name:"About",component:function(){return e.e("about").then(e.bind(null,"f820"))}},{path:"/songedit/:songId",name:"Song Edit",component:cn,props:!0},{path:"/songadd",name:"Song Add",component:gn,props:!0},{path:"/song/:song_slug",name:"SongViewPublic",component:kn,props:!0},{path:"/user/song/:song_slug",name:"SongViewUser",component:kn,props:!0},{path:"/songbooks",name:"Songbooks",component:In}],On=new w["a"]({mode:"history",base:"/",routes:En}),xn=On,An=e("43f9"),Pn=e.n(An);e("51de"),e("e094");o["default"].use(Pn.a);var Ln={apiKey:"AIzaSyAuL00hSASZLYySrOK_kVSK0bm49CE9sls",clientId:"273021499722-fau53tfosvudmels88fiq5mk305rq79c.apps.googleusercontent.com",discoveryDocs:["https://docs.googleapis.com/$discovery/rest?version=v1"],scope:"https://www.googleapis.com/auth/documents https://www.googleapis.com/auth/drive.file",refreshToken:!0};o["default"].use(z.a,Ln),o["default"].config.productionTip=!1,new o["default"]({router:xn,render:function(n){return n(S)}}).$mount("#app")},"5ced":function(n,t,e){},6500:function(n,t,e){"use strict";var o=e("943c"),s=e.n(o);s.a},"7a45":function(n,t,e){"use strict";var o=e("c1f8"),s=e.n(o);s.a},"7c5b":function(n,t,e){"use strict";var o=e("ca4b"),s=e.n(o);s.a},"85ec":function(n,t,e){},"943c":function(n,t,e){},c1f8:function(n,t,e){},ca4b:function(n,t,e){},cccb:function(n,t,e){"use strict";var o=e("5ced"),s=e.n(o);s.a},ce09:function(n,t,e){"use strict";var o=e("db7d"),s=e.n(o);s.a},db7d:function(n,t,e){}});
//# sourceMappingURL=app.7f6105e4.js.map